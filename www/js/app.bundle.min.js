!function(){"use strict";angular.module("category-add.controllers",[]).controller("categoryAddCtrl",["$scope","$state","CategoryService","$ionicHistory","$ionicActionSheet","$stateParams",function(t,e,i,n,a,o){t.addCategory="0"==o.id,t.category=i.getCategoryById(o.id)||{name:""},t.sections=[{name:""}],t.addSection=function(){t.sections.filter(function(t){return!t.name}).length||t.sections.push({name:""})},t.removeSection=function(e){t.sections.splice(e,1)},t.saveCategory=function(){var e=t.sections.filter(function(t){return!t.name});(!t.category.id&&t.category.name||t.category.id&&!e.length)&&(t.category.id?i.createSubCategory(t.category.id,t.sections):(t.category.children=t.sections,i.addCategory(t.category))),n.goBack()}}])}(),function(){"use strict";angular.module("category-edit.controllers",[]).controller("categoryEditCtrl",["$scope","$state","CategoryService","$ionicHistory","$ionicPopup","$stateParams",function(t,e,i,n,a,o){t.category=i.getCategoryById(o.id),t.sections=t.category.children||[],t.addSection=function(){t.sections.filter(function(t){return!t.name}).length||t.sections.push({name:""})},t.removeCategory=function(){a.confirm({title:"您确认要删除吗？",template:"请先删除该类别下的所有商品记录",cancelText:"取消",okText:"确认"}).then(function(e){i.deleteCategory(t.category.id),n.goBack()})},t.removeSection=function(e){a.confirm({title:"您确认要删除吗？",template:"请先删除该类别下的所有商品记录",cancelText:"取消",okText:"确认"}).then(function(i){t.sections.splice(e,1)})},t.saveCategory=function(){var e=t.sections.filter(function(t){return!t.name});t.category.name&&!e.length&&(t.category.children=t.sections,i.updateCategory(t.category.id,t.category),n.goBack())}}])}(),function(){"use strict";angular.module("category.controllers",["category-add.controllers","category-edit.controllers"]).controller("categoryCtrl",["$scope","$state","CategoryService","$ionicHistory","$ionicActionSheet",function(t,e,i,n,a){t.$on("$ionicView.enter",function(){t.categories=i.getAll(!0),t.activeCategory?t.categories.forEach(function(e){e.id==t.activeCategory.id&&(t.activeCategory=e,t.sections=e.children,t.sections&&0!=t.sections[0].id&&t.sections.unshift({id:0,name:"无小分类进入大分类"}))}):(t.activeCategory=t.categories[0],t.sections=t.categories[0].children,t.sections&&0!=t.sections[0].id&&t.sections.unshift({id:0,name:"无小分类进入大分类"}))}),t.selectCategory=function(e){t.activeCategory.id!=e&&angular.forEach(t.categories,function(i,n){i.id==e&&(t.activeCategory=i,t.sections=i.children,t.sections&&0!=t.sections[0].id&&t.sections.unshift({id:0,name:"无小分类进入大分类"}))})},t.selectSection=function(e){t.activeSection=e,n.goBack()},t.showActionSheet=function(){a.show({buttons:[{text:"新增小分类"},{text:"编辑分类"}],cancelText:"<b>取消</b>",buttonClicked:function(i){switch(i){case 0:e.go("app.categoryAdd",{id:t.activeCategory.id});break;case 1:e.go("app.categoryEdit",{id:t.activeCategory.id})}}})}}])}(),function(){"use strict";angular.module("category.service",[]).factory("CategoryService",["LocalStorageService",function(t){var e={},i="CATEGORY",n=[{id:1,name:"电脑整机",parent_id:0},{id:2,name:"电脑配件",parent_id:0},{id:3,name:"外设产品",parent_id:0},{id:4,name:"网络产品",parent_id:0},{id:5,name:"笔记本",parent_id:1},{id:6,name:"台式机",parent_id:1},{id:7,name:"平板电脑",parent_id:1},{id:8,name:"CPU",parent_id:2},{id:9,name:"内存",parent_id:2},{id:10,name:"鼠标",parent_id:3},{id:11,name:"键盘",parent_id:3},{id:12,name:"U盘",parent_id:3},{id:13,name:"路由器",parent_id:4},{id:14,name:"交换机",parent_id:4},{id:15,name:"网卡",parent_id:4},{id:16,name:"网络配件",parent_id:4}];return e.init=function(){this.originData=t.get(i),this.originData||(t.update(i,n),this.originData=n),this.refresh()},e.refresh=function(){this.dataMap={},this.originData.forEach(function(t){if(!t.parent_id){var e=angular.copy(t);e.children=[],this.dataMap[e.id]=e}}.bind(this)),this.originData.forEach(function(t){if(t.parent_id){var e=angular.copy(t);this.dataMap[t.parent_id].children.push(e)}}.bind(this)),this.nowId=Math.max.apply(null,this.originData.map(function(t){return t.id}))||1},e.getAll=function(t){return t?Object.keys(this.dataMap).map(function(t){return angular.copy(this.dataMap[t])}.bind(this)):this.originData},e.getCategoryById=function(t){return angular.copy(this.dataMap[t])},e.getSubCategoryByCategoryId=function(t){return this.dataMap[id]&&angular.copy(this.dataMap[id].children)},e.addCategory=function(t){var e=t.children||[];delete t.children;var i=this.createCategory(t);e.length&&this.createSubCategory(i,e)},e.createCategory=function(e){return e.id=this.nowId,e.parent_id=0,this.originData.push(e),t.update(i,this.originData),this.refresh(),e.id},e.createSubCategory=function(e,n){return n=n.map(function(t,i){return t.id=this.nowId+i+1,t.parent_id=e,t}.bind(this)),this.originData=this.originData.concat(n),t.update(i,this.originData),this.refresh(),!0},e.deleteCategory=function(e){return this.originData=this.originData.filter(function(t){return t.parent_id=e||t.id==e}),t.update(i,this.originData),this.refresh(),!0},e.deleteSubCategoryByCategoryId=function(e){return this.originData=this.originData.filter(function(t){return t.parent_id!=e}),t.update(i,this.originData),this.refresh(),!0},e.updateCategory=function(t,e){return this.originData.forEach(function(i){i.id==t&&(i.name=e.name)}),e.children.length&&this.updateSubCategory(t,e.children),this.refresh(),this.getCategoryById(t)},e.updateSubCategory=function(t,e){return this.deleteSubCategoryByCategoryId(t),this.createSubCategory(t,e),!0},e.init(),e}])}(),function(){"use strict";angular.module("home.controllers",[]).controller("HomeCtrl",["$scope","$state","LocalStorageService",function(t,e,i){t.$on("$ionicView.enter",function(t,n){Boolean(i.get("IS_LOGIN"))||e.go("login")})}])}(),function(){"use strict"}(),function(){"use strict"}(),function(){"use strict";angular.module("login.controllers",[]).controller("LoginCtrl",["$scope","$state","$ionicPopup","LocalStorageService",function(t,e,i,n){t.loginData=n.get("USER_INFO",{username:"",password:""}),t.login=function(){"admin"==t.loginData.username&&"123456"==t.loginData.password?(n.update("USER_INFO",t.loginData),n.update("IS_LOGIN","true"),e.go("app.home",{})):i.alert({title:"警告",template:"您的用户名或者密码错误",okText:"确定",okType:"button-energized"})}}])}(),function(){"use strict";angular.module("menu.controllers",[]).controller("AppCtrl",["$scope","$ionicModal","$timeout",function(t,e,i){t.loginData={},t.shopData={name:"黄加樑",phone:"18305961659"}}])}(),function(){"use strict";angular.module("welcome.controllers",[]).controller("WelcomeCtrl",["$scope",function(t){}])}(),function(){"use strict"}(),function(){"use strict"}();